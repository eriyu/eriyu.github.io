function ajaxLoadChartAndFundTrendData(){var t=$.Deferred(),e={},a=filterXSS(sessionStorage.getItem("interval"));return e.fundCode=filterXSS(sessionStorage.getItem("fundCode")),e.interval=a?a:$.getDefaultInterval(),$.ajax({url:Constants.getSingleFundIntervalNetWorthUrl(),type:"GET",data:e}).done(function(e){var a=e,o=[],n=[],d=a.NetWorthYScales,r=_.pluck(a.DayNetWorthIntervals,"Key"),i=a.HighestNetWorthDate?new Date(a.HighestNetWorthDate).format("yyyy/mm/dd"):"N/A",s=a.LowestNetWorthDate?new Date(a.LowestNetWorthDate).format("yyyy/mm/dd"):"N/A";return $("#tableIntervalNetWorth").loadMaxAndMinValueTable({tableCaption:"\u9078\u53d6\u7bc4\u570d\u6de8\u503c",maxValue:a.HighestNetWorth,maxValueDate:i,minValue:a.LowestNetWorth,minValueDate:s}),$("#fund-chart").removeClass(),_.isEmpty(a.DayNetWorths)?($("#fund-chart").html("\u76ee\u524d\u66ab\u7121\u8cc7\u6599").addClass("empty-data"),t.resolve(),t.promise()):(o.push(["NetWorthDate","NetWorth"]),$.each(a.DayNetWorths,function(t,e){var d="";o.push([t,parseFloat(e.NetWorth)]),_.includes(r,e.NetWorthDate)&&(d=_.result(_.find(a.DayNetWorthIntervals,"Key",e.NetWorthDate),"Value"),n.push({v:t,f:""+d}))}),drawChart(o,n,d),void t.resolve())}).fail(function(e){t.reject(e.responseJSON.Message)}),t.promise()}function drawChart(t,e,a){var o=google.visualization.arrayToDataTable(t),n={title:"",hAxis:{textStyle:{fontSize:8},ticks:e},vAxis:{textStyle:{fontSize:8},ticks:a},colors:["#CC0000"],legend:{position:"none"},chartArea:{width:260,backgroundColor:{stroke:"#000000",strokeWidth:"1"}},tooltip:{trigger:"none"}},d=new google.visualization.AreaChart(document.getElementById("fund-chart"));d.draw(o,n)}function ajaxLoadSingleFundNetWorth(){var t=$.Deferred(),e={};return e.fundId=filterXSS(sessionStorage.getItem("fundid")),$.ajax({url:Constants.getSingleFundNetWorthUrl(),type:"GET",data:e}).done(function(e){var a=e,o=[],n={thead:[],tbody:[],html:""},d=a.NetWorthDate?new Date(a.NetWorthDate).format("mm/dd"):"N/A",r=a.ToNowNetWorthHighDate?new Date(a.ToNowNetWorthHighDate).format("yyyy/mm/dd"):"N/A",i=a.ToNowNetWorthLowDate?new Date(a.ToNowNetWorthLowDate).format("yyyy/mm/dd"):"N/A";sessionStorage.setItem("fundCode",a.FundCode),$("#shortname").html(a.FundShortName),$("[data-role='moneytype']").loadMoneyType(a.MoneyDividendTypes),$("[data-role='page']").css({"padding-top":$("[data-role='header']").outerHeight(!0)+"px"}),$("#select-fund").loadSelectMoneyDividendTypes({moneyDividendTypes:a.MoneyDividendTypes,selectedValue:a.FundId}),$("#select-interval").loadFundIntervals({optionCaption:"\u6de8\u503c\u8d70\u52e2",optionDivider:"-"}),$("#tableToNowNetWorth").loadMaxAndMinValueTable({tableCaption:"\u6210\u7acb\u81f3\u4eca\u6de8\u503c",maxValue:a.ToNowNetWorthHigh,maxValueDate:r,minValue:a.ToNowNetWorthLow,minValueDate:i}),o.push(" <thead>"),o.push("   <th>\u6700\u65b0\u6de8\u503c</th><th>\u8f03\u524d\u4e00\u65e5<br>\u6f32\u8dcc</th><th>\u8f03\u524d\u4e00\u65e5<br>\u6f32\u8dcc\u5e45(%)</th>"),o.push(" </thead>"),o.push(" <tbody>"),o.push("  <td>"),o.push("    <div class='net-worth "+$.cxRise(a.NetWorth)+"'>"+a.NetWorth+"</div>"),o.push("    <div class='net-worth-date'>("+d+")</div>"),o.push("  </td>"),o.push("  <td>"),o.push("    <span class='"+$.cxRise(a.RiseAndDrop)+"'>"+(a.RiseAndDrop||"N/A")+"</span>"),o.push("  </td>"),o.push("  <td>"),o.push("    <span class='"+$.cxRise(a.RiseAndDecline)+"'>"+(a.RiseAndDecline||"N/A")+"</span>"),o.push("  </td>"),o.push(" </tbody>"),$("#tableRiseAndDrop").html(o.join(" ")),_(a.RecentlyNetWorths).reverse().value(),$.each(a.RecentlyNetWorths,function(t,e){var a=e.NetWorthDate?new Date(e.NetWorthDate).format("mm/dd"):"N/A";n.thead.push(" <th>"+a+"</th>"),n.tbody.push(" <td>"+e.NetWorth+"</td>")}),a.RecentlyNetWorths&&a.RecentlyNetWorths.length>0?(n.thead.unshift("<thead>"),n.thead.push("</thead>"),n.tbody.unshift("<tbody>"),n.tbody.push("</tbody>"),n.html=n.thead.join(" ")+n.tbody.join(" ")):n.html="<div class='empty-data'>N/A</div>",$("#tableRecentlyNetWorth").html(n.html),t.resolve()}).fail(function(e){t.reject(e.responseJSON.Message)}),t.promise()}google.load("visualization","1",{packages:["corechart"]}),google.setOnLoadCallback(ajaxLoadChartAndFundTrendData),$(document).on("change","#select-interval",function(t){App.StartLoading(),sessionStorage.setItem("interval",$(this).val()),$.when(ajaxLoadChartAndFundTrendData()).done(function(){App.StopLoading()}).fail(function(t){App.ShowAlert(t,"","\u78ba\u5b9a",function(){App.StopLoading()})})}),$(document).on("change","#select-fund",function(t){App.StartLoading(),sessionStorage.setItem("fundid",$(this).val()),ajaxLoadSingleFundNetWorth().then(function(){ajaxLoadChartAndFundTrendData()}).done(function(){App.StopLoading()}).fail(function(t){App.ShowAlert(t,"","\u78ba\u5b9a",function(){App.StopLoading()})})}),$(document).on("pageinit","#page-sfnw",function(t){App.StartLoading(),$(".numura-warning").loadWarning(),sessionStorage.removeItem("interval"),ajaxLoadSingleFundNetWorth().then(function(){ajaxLoadChartAndFundTrendData()}).done(function(){App.StopLoading()}).fail(function(t){App.ShowAlert(t,"","\u78ba\u5b9a",function(){App.StopLoading()})})});
//# sourceMappingURL=singleFundNetWorth.min.js.map
