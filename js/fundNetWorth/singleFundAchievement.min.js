function ajaxLoadChartAndFundReturnRateData(){var e=$.Deferred(),t={},a=filterXSS(sessionStorage.getItem("interval"));return t.fundCode=filterXSS(sessionStorage.getItem("fundCode")),t.interval=a?a:$.getDefaultInterval(),$.ajax({url:Constants.getSingleFundIntervalReturnRateUrl(),type:"GET",data:t}).done(function(t){var a=t,n=[],o=[],i=_.pluck(a.DayReturnRateIntervals,"Key"),d=a.HighestReturnRateDate?new Date(a.HighestReturnRateDate).format("yyyy/mm/dd"):"N/A",r=a.LowestReturnRateDate?new Date(a.LowestReturnRateDate).format("yyyy/mm/dd"):"N/A";return $("#tableIntervalReturnRate").loadMaxAndMinValueTable({tableCaption:"\u5340\u9593\u5167\u5831\u916c\u7387(%)",maxValue:a.HighestReturnRate,maxValueDate:d,minValue:a.LowestReturnRate,minValueDate:r}),$("#fund-chart").removeClass(),_.isEmpty(a.DayReturnRates)?($("#fund-chart").html("\u76ee\u524d\u66ab\u7121\u8cc7\u6599").addClass("empty-data"),e.resolve(),e.promise()):(n.push(["NetWorthDate","NetWorth"]),$.each(a.DayReturnRates,function(e,t){var d="";n.push([e,parseFloat(t.ReturnRate)]),_.includes(i,t.ReturnRateDate)&&(d=_.result(_.find(a.DayReturnRateIntervals,"Key",t.ReturnRateDate),"Value"),o.push({v:e,f:""+d}))}),drawChart(n,o),void e.resolve())}).fail(function(t){e.reject(t.responseJSON.Message)}),e.promise()}function drawChart(e,t){var a=google.visualization.arrayToDataTable(e),n={title:"",hAxis:{textStyle:{fontSize:8},ticks:t},vAxis:{textStyle:{fontSize:8},minValue:0,format:"#0.0"},colors:["#CC0000"],legend:{position:"none"},chartArea:{width:280,backgroundColor:{stroke:"#000000",strokeWidth:"1"}},tooltip:{trigger:"none"}},o=new google.visualization.AreaChart(document.getElementById("fund-chart"));o.draw(a,n)}function ajaxLoadSingleFundAchievement(){var e=$.Deferred(),t={};return t.fundId=filterXSS(sessionStorage.getItem("fundid")),$.ajax({url:Constants.getSingleFundAchievementUrl(),type:"GET",data:t}).done(function(t){var a=t,n=a.FromEstablishHighestDate?new Date(a.FromEstablishHighestDate).format("yyyy/mm/dd"):"N/A",o=a.FromEstablishLowestDate?new Date(a.FromEstablishLowestDate).format("yyyy/mm/dd"):"N/A";sessionStorage.setItem("fundCode",a.FundCode),$("#shortname").html(a.FundShortName),$("[data-role='moneytype']").loadMoneyType(a.MoneyDividendTypes),$("[data-role='page']").css({"padding-top":$("[data-role='header']").outerHeight(!0)+"px"}),$("#select-fund").loadSelectMoneyDividendTypes({moneyDividendTypes:a.MoneyDividendTypes,selectedValue:a.FundId}),$("#select-interval").loadFundIntervals({optionCaption:"\u7e3e\u6548\u8d70\u52e2",optionDivider:"-"}),$(".tableAchievement").html(function(){var e=$(this),t={thead:[],tbody:[],html:""},n=e.data("table-key"),o=Constants.getAchievementMapping()[n];return $.each(o,function(e,n){var o=a[n.Key]?a[n.Key]:"N/A";o=n.Key?o:"",t.thead.push("<th>"+n.Caption+"</th>"),t.tbody.push("<td>"),t.tbody.push("  <span class='"+$.cxRise(o)+"'>"+o+"</span>"),t.tbody.push("</td>")}),t.thead.unshift("<thead>"),t.thead.push("</thead>"),t.tbody.unshift("<tbody>"),t.tbody.push("</tbody>"),t.html=t.thead.join(" ")+t.tbody.join(" "),t.html}),$("#tableToNowAchievement").loadMaxAndMinValueTable({tableCaption:"\u6210\u7acb\u81f3\u4eca\u7e3e\u6548(%)",maxValue:a.FromEstablishHighest,maxValueDate:n,minValue:a.FromEstablishLowest,minValueDate:o}),e.resolve()}).fail(function(t){e.reject(t.responseJSON.Message)}),e.promise()}google.load("visualization","1",{packages:["corechart"]}),google.setOnLoadCallback(ajaxLoadChartAndFundReturnRateData),$(document).on("change","#select-interval",function(e){App.StartLoading(),sessionStorage.setItem("interval",$(this).val()),$.when(ajaxLoadChartAndFundReturnRateData()).done(function(){App.StopLoading()}).fail(function(e){App.ShowAlert(e,"","\u78ba\u5b9a",function(){App.StopLoading()})})}),$(document).on("change","#select-fund",function(e){App.StartLoading(),sessionStorage.setItem("fundid",$(this).val()),ajaxLoadSingleFundAchievement().then(function(){ajaxLoadChartAndFundReturnRateData()}).done(function(){App.StopLoading()}).fail(function(e){App.ShowAlert(e,"","\u78ba\u5b9a",function(){App.StopLoading()})})}),$(document).on("pageinit","#page-sfa",function(e){App.StartLoading(),$(".numura-warning").loadWarning(),ajaxLoadSingleFundAchievement().then(function(){ajaxLoadChartAndFundReturnRateData()}).done(function(){App.StopLoading()}).fail(function(e){App.ShowAlert(e,"","\u78ba\u5b9a",function(){App.StopLoading()})})});
//# sourceMappingURL=singleFundAchievement.min.js.map
