{"version":3,"sources":["fundShore/index.js"],"names":["$","document","on","event","App","StartLoading","loadWarning","ajax","url","Constants","getFundShareUrl","type","done","response","excludeValueList","_","pluck","filter","item","FundShores","length","data","loadSelectFundCompany","success","trigger","StopLoading","fundShoreList","filterList","Company","CompanyId","val","aFundShore","shoreHtml","push","each","index","fundShoreItem","NowDate","Date","ShoreDate","DatumDate","Eliminates","fmtNowDate","format","fmtShoreDate","cxCurrent","html","join"],"mappings":"AAAAA,EAAEC,UAAUC,GAAI,WAAY,mBAAoB,SAASC,GAEvDC,IAAIC,eAEJL,EAAE,mBAAmBM,cAErBN,EAAEO,MACEC,IAAKC,UAAUC,kBACfC,KAAK,QACNC,KAAK,SAASC,GAEf,GAAIC,GAAmBC,EAAEC,MACvBD,EAAEC,MACAD,EAAEE,OAAOJ,EAAS,SAASK,GACzB,MAAkC,KAA3BA,EAAKC,WAAWC,SAEzB,WACF,YAEFpB,GAAE,iBAAiBqB,KAAK,kBAAkBR,GAE1Cb,EAAE,mBAAmBsB,uBACnBR,iBAAqBA,EACrBS,QAAU,WACRvB,EAAE,mBAAmBwB,QAAQ,UAC7BpB,IAAIqB,qBAQZzB,EAAEC,UAAUC,GAAG,SAAS,kBAAkB,SAASC,GACjD,GAAIuB,GAAgB1B,EAAE,iBAAiBqB,KAAK,mBACxCM,EAAaZ,EAAEE,OAAOS,EAAc,SAASR,GAC/C,MAAOA,GAAKU,QAAQC,UAAU,IAAO7B,EAAE,mBAAmB8B,MAAM,KAE9DC,EAAaJ,EAAW,GACxBK,IACJA,GAAUC,KAAK,6BACfD,EAAUC,KAAK,YACfD,EAAUC,KAAK,wDACfD,EAAUC,KAAK,kDACfD,EAAUC,KAAK,kCACfD,EAAUC,KAAK,aACfjC,EAAEkC,KAAKH,EAAWZ,WAAW,SAASgB,EAAMC,GAC1C,GAAIC,GAAU,GAAIC,MACdC,EAAY,GAAID,MAAKF,EAAcG,WACnCC,EAAY,GAAIF,MAAKF,EAAcI,WACnCC,EAAa,GAAIH,MAAKF,EAAcK,YACpCC,EAAaL,EAAQM,OAAO,UAC5BC,EAAeL,EAAUI,OAAO,UAChCE,EAAaH,IAAeE,EAAgB,UAAY,EAC5DZ,GAAUC,KAAK,iBAAmBY,EAAY,MAC9Cb,EAAUC,KAAK,SAAWM,EAAUI,OAAO,sBAAc,SACzDX,EAAUC,KAAK,SAAWO,EAAUG,OAAO,cAAgB,SAC3DX,EAAUC,KAAK,SAAWQ,EAAWE,OAAO,cAAgB,SAC5DX,EAAUC,KAAK,cAEjBD,EAAUC,KAAK,YACfjC,EAAE,iBAAiB8C,KAAKd,EAAUe,KAAK","file":"fundShore/index.min.js","sourcesContent":["$(document).on( \"pageinit\", \"#page-fund-shore\", function(event) {\n\n  App.StartLoading();\n\n  $(\".numura-warning\").loadWarning();\n\n  $.ajax({\n      url: Constants.getFundShareUrl(),\n      type:\"GET\"\n  }).done(function(response){\n\n    var excludeValueList = _.pluck(\n      _.pluck(\n        _.filter(response,function(item){\n          return item.FundShores.length === 0;\n        }),\n        'Company'),\n      'CompanyId');\n\n    $(\"#result-block\").data(\"fund-shore-list\",response);\n\n    $(\"#select-company\").loadSelectFundCompany({\n      \"excludeValueList\" : excludeValueList,\n      \"success\":function(){\n        $(\"#select-company\").trigger('change');\n        App.StopLoading();       \n      }\n    });\n    \n  });  \n\n});\n\n$(document).on(\"change\",\"#select-company\",function(event){ \n  var fundShoreList = $(\"#result-block\").data(\"fund-shore-list\");\n  var filterList = _.filter(fundShoreList,function(item){\n    return item.Company.CompanyId+\"\" === $(\"#select-company\").val()+\"\";\n  });\n  var aFundShore = filterList[0];\n  var shoreHtml = [];\n  shoreHtml.push(\"<table data-role='table'>\");\n  shoreHtml.push(\" <thead>\");\n  shoreHtml.push(\"   <th>配息<br>公布月份</th>\");\n  shoreHtml.push(\"   <th>配息<br>基準日</th>\");\n  shoreHtml.push(\"   <th>除息日</th>\");\n  shoreHtml.push(\" </thead>\");\n  $.each(aFundShore.FundShores,function(index,fundShoreItem){\n    var NowDate = new Date(),\n        ShoreDate = new Date(fundShoreItem.ShoreDate),\n        DatumDate = new Date(fundShoreItem.DatumDate),\n        Eliminates = new Date(fundShoreItem.Eliminates),\n        fmtNowDate = NowDate.format(\"yyyymm\"),\n        fmtShoreDate = ShoreDate.format(\"yyyymm\"),\n        cxCurrent = (fmtNowDate === fmtShoreDate) ? \"current\" : \"\";\n    shoreHtml.push(\"<tbody class='\" + cxCurrent + \"'>\");\n    shoreHtml.push(\"  <td>\" + ShoreDate.format(\"yyyy年mm月\") + \"</td>\");\n    shoreHtml.push(\"  <td>\" + DatumDate.format(\"yyyy/mm/dd\") + \"</td>\");\n    shoreHtml.push(\"  <td>\" + Eliminates.format(\"yyyy/mm/dd\") + \"</td>\");\n    shoreHtml.push(\"</tbody>\");\n  });         \n  shoreHtml.push(\"</table>\");\n  $(\"#result-block\").html(shoreHtml.join(\" \"));      \n});\n\n"],"sourceRoot":"/source/"}